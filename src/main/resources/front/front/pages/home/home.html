<!DOCTYPE html>
<html>

<head lang="en">
	<meta charset="utf-8">
	<title>首页</title>
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<link rel="stylesheet" href="../../layui/css/layui.css">
	<link href="https://cdn.bootcdn.net/ajax/libs/Swiper/5.4.5/css/swiper.min.css" rel="stylesheet">
	<link rel="stylesheet" href="../../xznstatic/css/common.css" />
	<link rel="stylesheet" href="../../xznstatic/css/style.css" />
	<script src="../../xznstatic/js/jquery-1.11.3.min.js"></script>
	<script src="../../xznstatic/js/jquery.SuperSlide.2.1.1.js"></script>
</head>
<style>
	[v-cloak] {
		display: none !important;
	}

	html,
	body {
		font-family: "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
		background-color: #f6f8fa;
		color: #333;
	}

	/* Common Section Styles */
	.section-container {
		width: 100%;
		max-width: 1200px;
		margin: 40px auto;
		padding: 0 20px;
		box-sizing: border-box;
	}

	.section-header {
		text-align: center;
		margin-bottom: 40px;
		position: relative;
	}

	.section-header h2 {
		font-size: 28px;
		color: #333;
		font-weight: 600;
		margin: 0;
		display: inline-block;
		position: relative;
	}

	.section-header span {
		display: block;
		font-size: 14px;
		color: #999;
		margin-top: 10px;
		text-transform: uppercase;
		letter-spacing: 2px;
	}

	.section-header::after {
		content: '';
		display: block;
		width: 60px;
		height: 3px;
		background: #1E9FFF;
		margin: 15px auto 0;
	}

	/* Banner */
	.banner {
		width: 100%;
		margin-top: 0;
		overflow: hidden;
	}

	.banner img {
		width: 100%;
		height: 100%;
		object-fit: cover;
	}

	/* News List (Card Style) */
	.news-grid {
		display: grid;
		grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
		gap: 30px;
	}

	.news-card {
		background: #fff;
		border-radius: 12px;
		overflow: hidden;
		box-shadow: 0 4px 16px rgba(0, 0, 0, 0.05);
		transition: transform 0.3s, box-shadow 0.3s;
		cursor: pointer;
		display: flex;
		flex-direction: column;
	}

	.news-card:hover {
		transform: translateY(-5px);
		box-shadow: 0 8px 25px rgba(30, 159, 255, 0.15);
	}

	.news-card .img-box {
		width: 100%;
		height: 200px;
		overflow: hidden;
	}

	.news-card .img-box img {
		width: 100%;
		height: 100%;
		object-fit: cover;
		transition: transform 0.5s;
	}

	.news-card:hover .img-box img {
		transform: scale(1.05);
	}

	.news-card .content {
		padding: 20px;
		flex: 1;
		display: flex;
		flex-direction: column;
	}

	.news-card .title {
		font-size: 18px;
		font-weight: bold;
		color: #333;
		margin-bottom: 10px;
		line-height: 1.4;
		display: -webkit-box;
		-webkit-line-clamp: 2;
		-webkit-box-orient: vertical;
		overflow: hidden;
	}

	.news-card:hover .title {
		color: #1E9FFF;
	}

	.news-card .date {
		font-size: 13px;
		color: #999;
		margin-top: auto;
	}

	/* Competition/Product List */
	.competition-grid {
		display: grid;
		grid-template-columns: repeat(5, 1fr);
		/* 5 items per row */
		gap: 20px;
	}

	/* Responsive grid */
	@media (max-width: 1200px) {
		.competition-grid {
			grid-template-columns: repeat(4, 1fr);
		}
	}

	@media (max-width: 992px) {
		.competition-grid {
			grid-template-columns: repeat(3, 1fr);
		}
	}

	@media (max-width: 768px) {
		.competition-grid {
			grid-template-columns: repeat(2, 1fr);
		}
	}

	.comp-card {
		background: #fff;
		border-radius: 8px;
		overflow: hidden;
		box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
		transition: all 0.3s;
		cursor: pointer;
		position: relative;
	}

	.comp-card:hover {
		transform: translateY(-5px);
		box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
	}

	.comp-card .img-wrapper {
		width: 100%;
		padding-top: 100%;
		/* 1:1 Aspect Ratio */
		position: relative;
		background: #f0f0f0;
	}

	.comp-card .img-wrapper img {
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		object-fit: cover;
	}

	.comp-card .info {
		padding: 15px;
		text-align: center;
	}

	.comp-card .info .name {
		font-size: 16px;
		color: #333;
		white-space: nowrap;
		overflow: hidden;
		text-overflow: ellipsis;
	}

	.comp-card:hover .info .name {
		color: #1E9FFF;
	}

	/* More Button */
	.more-btn-container {
		text-align: center;
		margin-top: 40px;
	}

	.more-btn {
		display: inline-block;
		padding: 10px 30px;
		border: 1px solid #ddd;
		border-radius: 20px;
		color: #666;
		background: #fff;
		transition: all 0.3s;
		cursor: pointer;
	}

	.more-btn:hover {
		border-color: #1E9FFF;
		color: #1E9FFF;
	}
</style>

<body>
	<div id="app" v-cloak>
		<!-- Banner Carousel -->
		<div class="banner">
			<div class="layui-carousel" id="test1" style="width: 100%;">
				<div carousel-item>
					<div v-for="(item,index) in swiperList" :key="index">
						<img :src="item.img" />
					</div>
				</div>
			</div>
		</div>

		<!-- Main Content -->
		<div id="content">

			<!-- News Section -->
			<div class="section-container">
				<div class="section-header">
					<h2>新闻资讯</h2>
					<span>Latest News</span>
				</div>

				<div class="news-grid">
					<div v-for="(item,index) in newsList" :key="index" class="news-card"
						@click="jump('../news/detail.html?id='+item.id)">
						<div class="img-box">
							<img :src="item.picture" alt="News Image"
								onerror="this.src='../../xznstatic/img/no-image.png'" />
						</div>
						<div class="content">
							<div class="title">{{item.title}}</div>
							<div class="date">{{item.addtime.split(' ')[0]}}</div>
						</div>
					</div>
				</div>

				<div class="more-btn-container">
					<button class="more-btn" @click="jump('../news/list.html')">查看更多 <i
							class="layui-icon layui-icon-right"></i></button>
				</div>
			</div>

			<!-- Competition Section -->
			<div class="section-container"
				style="background: #fff; padding: 40px 20px; max-width: 100%; border-radius: 0;">
				<!-- Wrapper with white full-width bg, but inner content constrained -->
				<div style="max-width: 1200px; margin: 0 auto;">
					<div class="section-header">
						<h2>赛项信息展示</h2>
						<span>Competition Information</span>
					</div>

					<div class="competition-grid">
						<div v-for="(item,index) in saixiangxinxiList" :key="index" class="comp-card"
							@click="jump('../saixiangxinxi/detail.html?id='+item.id)">
							<div class="img-wrapper">
								<img :src="item.tupian?item.tupian.split(',')[0]:''" alt=""
									onerror="this.src='../../xznstatic/img/no-image.png'" />
							</div>
							<div class="info">
								<div class="name">{{item.saixiangmingcheng}}</div>
							</div>
						</div>
					</div>

					<div class="more-btn-container">
						<button class="more-btn" @click="jump('../saixiangxinxi/list.html')">查看更多 <i
								class="layui-icon layui-icon-right"></i></button>
					</div>
				</div>
			</div>

		</div>
	</div>

	<script src="../../layui/layui.js"></script>
	<script src="https://cdn.bootcdn.net/ajax/libs/Swiper/5.4.5/js/swiper.min.js"></script>
	<script src="../../js/vue.js"></script>
	<script src="../../js/config.js"></script>
	<script src="../../modules/config.js"></script>
	<script src="../../js/utils.js"></script>
	<script type="text/javascript">
		var vue = new Vue({
			el: '#app',
			data: {
				saixiangxinxiList: [],
				swiperList: [],
				newsList: []
			},
			methods: {
				jump(url) {
					jump(url)
				},
			}
		});

		layui.use(['layer', 'form', 'element', 'carousel', 'http', 'jquery'], function () {
			var layer = layui.layer;
			var element = layui.element;
			var form = layui.form;
			var carousel = layui.carousel;
			var http = layui.http;
			var jquery = layui.jquery;

			// 获取轮播图 数据
			http.request('config/list', 'get', {
				page: 1, limit: 5
			}, function (res) {
				if (res.data.list.length > 0) {
					let swiperList = [];
					res.data.list.forEach(element => {
						if (element.value != null) {
							swiperList.push({
								img: element.value
							});
						}
					});
					vue.swiperList = swiperList;
					vue.$nextTick(() => {
						carousel.render({
							elem: '#test1',
							width: '100%',
							height: '500px', // Increased height
							arrow: 'hover',
							anim: 'fade', // Better animation
							autoplay: 'true',
							interval: '4000',
							indicator: 'inside'
						});
					})
				}
			});

			// 新闻资讯
			http.request('news/list', 'get', {
				page: 1, limit: 6, // Show 6 items
				order: 'desc'
			}, function (res) {
				vue.newsList = res.data.list;
			});


			// 赛项信息
			http.request(`saixiangxinxi/list`, 'get', {
				page: 1, limit: 10,
			}, function (res) {
				vue.saixiangxinxiList = res.data.list;
			});
		});
	</script>
</body>

</html>
<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<title>详情</title>
	<link rel="stylesheet" href="../../layui/css/layui.css">
	<link rel="stylesheet" href="../../xznstatic/css/common.css" />
	<link rel="stylesheet" href="../../xznstatic/css/style.css" />
	<style>
		body {
			background-color: #f6f8fa;
		}

		.detail-container {
			width: 1200px;
			margin: 40px auto;
			background: #fff;
			box-shadow: 0 4px 16px rgba(0, 0, 0, 0.05);
			border-radius: 8px;
			padding: 40px;
		}

		/* Breadcrumb */
		.breadcrumb {
			margin-bottom: 30px;
			color: #999;
		}

		.breadcrumb a {
			color: #666;
			margin: 0 5px;
		}

		.breadcrumb a:hover {
			color: #1E9FFF;
		}

		.breadcrumb span {
			color: #1E9FFF;
			font-weight: bold;
		}

		/* Top Section */
		.detail-header {
			display: flex;
			gap: 40px;
			margin-bottom: 50px;
		}

		.detail-gallery {
			width: 400px;
			height: 400px;
			border-radius: 8px;
			overflow: hidden;
			box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
		}

		.detail-info {
			flex: 1;
		}

		.detail-title {
			font-size: 24px;
			color: #333;
			font-weight: 600;
			margin-bottom: 20px;
			line-height: 1.4;
		}

		.info-item {
			display: flex;
			margin-bottom: 15px;
			font-size: 15px;
			color: #555;
			line-height: 1.6;
			border-bottom: 1px dashed #eee;
			padding-bottom: 15px;
		}

		.info-label {
			width: 100px;
			color: #999;
			flex-shrink: 0;
		}

		.info-value {
			color: #333;
		}

		.price-tag {
			font-size: 18px;
			color: #ff5722;
			font-weight: bold;
		}

		.action-btns {
			margin-top: 30px;
		}

		.btn-apply {
			background-color: #1E9FFF;
			color: white;
			padding: 0 40px;
			height: 40px;
			line-height: 40px;
			border-radius: 6px;
			border: none;
			cursor: pointer;
			font-size: 16px;
			transition: all 0.3s;
			box-shadow: 0 4px 12px rgba(30, 159, 255, 0.3);
		}

		.btn-apply:hover {
			background-color: #0088ee;
			transform: translateY(-2px);
		}

		/* Tabs */
		.detail-tabs {
			margin-top: 40px;
		}

		.layui-tab-title {
			border-bottom-color: #1E9FFF;
		}

		.layui-tab-title li {
			font-size: 16px;
		}

		.layui-tab-title .layui-this {
			color: #1E9FFF;
		}

		.layui-tab-title .layui-this:after {
			border-bottom-color: #1E9FFF;
		}

		.tab-content-box {
			padding: 30px;
			min-height: 200px;
			line-height: 1.8;
			font-size: 15px;
			color: #555;
		}

		.tab-content-box img {
			max-width: 100%;
		}
	</style>
</head>

<body>
	<div id="app" v-cloak>
		<div class="banner">
			<!-- Optional: Consistent banner or empty -->
		</div>

		<div class="detail-container">
			<!-- Breadcrumb -->
			<div class="breadcrumb">
				<a href="../home/home.html">首页</a> /
				<a href="javascript:history.back()">赛项信息</a> /
				<span>{{title}}</span>
			</div>

			<div class="detail-header">
				<!-- Gallery -->
				<div class="detail-gallery">
					<div class="layui-carousel" id="swiper" style="width: 100%; height: 100%;">
						<div carousel-item>
							<div v-for="(item,index) in swiperList" :key="index">
								<img :src="item" style="width: 100%; height: 100%; object-fit: cover;" />
							</div>
						</div>
					</div>
				</div>

				<!-- Info -->
				<div class="detail-info">
					<div class="detail-title">{{title}}</div>

					<div class="info-item">
						<span class="info-label">级别：</span>
						<span class="info-value">{{detail.jibie}}</span>
					</div>

					<div class="info-item">
						<span class="info-label">赛项内容：</span>
						<span class="info-value">{{detail.saixiangneirong}}</span>
					</div>

					<div class="info-item">
						<span class="info-label">比赛地点：</span>
						<span class="info-value">{{detail.bisaididian}}</span>
					</div>

					<div class="info-item">
						<span class="info-label">类型：</span>
						<span class="info-value">{{detail.leixing}}</span>
					</div>

					<div class="info-item">
						<span class="info-label">参加人数：</span>
						<span class="info-value">{{detail.canjiarenshu}}</span>
					</div>

					<div class="info-item">
						<span class="info-label">截至日期：</span>
						<span class="info-value">{{detail.jiezhiriqi}}</span>
					</div>

					<div class="info-item" style="border-bottom: none;">
						<span class="info-label">报名费用：</span>
						<span class="info-value price-tag">{{detail.baomingfeiyong}} RMB</span>
					</div>

					<div class="action-btns">
						<button v-if="isAuth('saixiangxinxi','报名')" @click="onAcrossTap('saixiangbaoming')"
							type="button" class="btn-apply">
							<i class="layui-icon">&#xe62a;</i> 立即报名
						</button>
					</div>
				</div>
			</div>

			<!-- Tabs -->
			<div class="layui-tab layui-tab-brief detail-tabs" lay-filter="docDemoTabBrief">
				<ul class="layui-tab-title">
					<li class="layui-this">详细详情</li>
				</ul>
				<div class="layui-tab-content">
					<div class="layui-tab-item layui-show tab-content-box">
						<div v-html="detail.xiangqing"></div>
					</div>
				</div>
			</div>

		</div>
	</div>

	<script src="../../layui/layui.js"></script>
	<script src="../../js/vue.js"></script>
	<script src="../../js/config.js"></script>
	<script src="../../modules/config.js"></script>
	<script src="../../js/utils.js"></script>

	<script>
		var vue = new Vue({
			el: '#app',
			data: {
				swiperList: [],
				detail: { id: 0 },
				title: '',
				detailTable: 'saixiangxinxi',
			},
			methods: {
				jump(url) { jump(url) },
				isAuth(tablename, button) { return isFrontAuth(tablename, button) },
				onAcrossTap(acrossTable) {
					localStorage.setItem('crossTable', `saixiangxinxi`);
					localStorage.setItem('crossObj', JSON.stringify(this.detail));
					jump(`../${acrossTable}/add.html?corss=true`);
				}
			}
		});

		layui.use(['layer', 'form', 'element', 'carousel', 'http', 'jquery'], function () {
			var layer = layui.layer;
			var element = layui.element;
			var carousel = layui.carousel;
			var http = layui.http;
			var jquery = layui.jquery;
			var id = http.getParam('id');
			vue.detail.id = id;

			http.request(`${vue.detailTable}/detail/` + id, 'get', {}, function (res) {
				vue.detail = res.data;
				vue.title = vue.detail.saixiangmingcheng;
				vue.swiperList = vue.detail.tupian ? vue.detail.tupian.split(",") : [];

				vue.$nextTick(() => {
					carousel.render({
						elem: '#swiper',
						width: '100%',
						height: '100%',
						arrow: 'hover',
						anim: 'fade',
						autoplay: 'true',
						interval: '4000',
						indicator: 'none'
					});
				})
			});
		});
	</script>
</body>

</html>